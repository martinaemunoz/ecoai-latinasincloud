{% extends "base.html" %}

{% block content %}
<section class="results-section">
    <div class="results-container">
        <a href="{{ url_for('index') }}" class="back-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Volver a inicio
        </a>

        {% if resultado is string %}
            <!-- error state -->
            <div class="error-container">
                <div class="error-icon">‚ö†Ô∏è</div>
                <h2>Oops, algo sali√≥ mal</h2>
                <p class="error-message">{{ resultado }}</p>
                <a href="{{ url_for('index') }}" class="btn btn-primary">Intentar de nuevo</a>
            </div>

        {% elif resultado is mapping %}
            <!-- success state -->
            <div class="success-container">
                <h2>Tu Impacto Ambiental en Equivalencias</h2>
                <p class="subtitle">¬øQu√© significa en t√©rminos reales el impacto de tus consultas a la IA?</p>
                <!-- grid de resultados -->
                <div class="results-grid">
                    <!-- impacto del agua -->
                    <div class="result-card water-card">
                        <div class="card-header">
                            <span class="metric-icon">üíß</span>
                            <h3>Agua</h3>
                        </div>
                        <div class="card-content">
                            <div class="metric-value">{{ resultado.agua }} <span class="metric-unit">L</span></div>
                            <div class="metric-equivalence">{{ resultado.eq_agua }}</div>
                        </div>
                    </div>

                    <!-- impacto de la energ√≠a -->
                    <div class="result-card energy-card">
                        <div class="card-header">
                            <span class="metric-icon">‚ö°</span>
                            <h3>Energ√≠a</h3>
                        </div>
                        <div class="card-content">
                            <div class="metric-value">{{ resultado.energia }} <span class="metric-unit">kWh</span></div>
                            <div class="metric-equivalence">{{ resultado.eq_energia }}</div>
                        </div>
                    </div>

                    <!-- impacto del co2 -->
                    <div class="result-card carbon-card">
                        <div class="card-header">
                            <span class="metric-icon">üåç</span>
                            <h3>Carbono</h3>
                        </div>
                        <div class="card-content">
                            <div class="metric-value">{{ resultado.co2 }} <span class="metric-unit">g</span></div>
                            <div class="metric-equivalence">{{ resultado.eq_co2 }}</div>
                        </div>
                    </div>
                </div>

                <!-- resumen de la consulta -->
                <div class="summary-card">
                    <h3>Resumen de tu Consulta</h3>
                    <div class="summary-details">
                        <div class="summary-row">
                            <span class="summary-label">Modelo:</span>
                            <span class="summary-value">{{ resultado.modelo }}</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Tipo de Consulta:</span>
                            <span class="summary-value">{{ resultado.tipo_consulta|capitalize }}</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Cantidad:</span>
                            <span class="summary-value">{{ resultado.cantidad_formateada }}</span>
                        </div>
                    </div>
                </div>

                <!-- what's next -->
                <div class="cta-section">
                    <h3>¬øQu√© sigue?</h3>
                    <div class="cta-buttons">
                        <a href="{{ url_for('index') }}" class="btn btn-primary">Calcular de nuevo</a>
                        <a href="{{ url_for('comparativo') }}" class="btn btn-secondary">Ver comparativa</a>
                    </div>
                </div>
            </div>

        {% else %}
            <!-- empty state -->
            <div class="empty-state">
                <div class="empty-icon">üìä</div>
                <h2>Sin resultados</h2>
                <p>No hay datos disponibles para mostrar. Por favor, regresa e intenta de nuevo.</p>
                <a href="{{ url_for('index') }}" class="btn btn-primary">Volver al inicio</a>
            </div>

        {% endif %}
    </div>
</section>

{% endblock %}